<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description"
    content="WattFlow - Medidor de Pot√™ncia para Ciclismo Avan√ßado. Estime sua pot√™ncia com precis√£o.">
  <title>WattFlow - Medidor de Pot√™ncia</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="/style.css">
</head>

<body>
  <div id="app">
    <!-- Navigation -->
    <nav class="navbar">
      <div class="logo">WattFlow</div>
      <div class="nav-controls">
        <!-- Language Dropdown -->
        <div class="lang-dropdown-container">
          <button id="btn-lang-toggle" class="btn-icon btn-lang-toggle" aria-label="Selecionar Idioma">
            <span id="current-lang-flag">üáßüá∑</span>
          </button>
          <div id="lang-menu" class="lang-menu hidden">
            <button class="lang-option" data-lang="pt-BR">
              <span>üáßüá∑</span> Portugu√™s
            </button>
            <button class="lang-option" data-lang="es-ES">
              <span>üá™üá∏</span> Espa√±ol
            </button>
            <button class="lang-option" data-lang="en-US">
              <span>üá∫üá∏</span> English
            </button>
          </div>
        </div>
        <div id="nav-credits-container"
          style="display: none; align-items: center; margin-right: 1rem; cursor: pointer; font-size: 0.9rem;">
          <span style="margin-right: 4px;">üíé</span>
          <span id="nav-credits-count" style="font-weight: 600;">--</span>
        </div>
        <button id="btn-theme-toggle" class="btn-icon" aria-label="Alternar Tema">üåô</button>
        <div class="user-avatar-wrapper" id="userAvatarWrapper" style="display: none;">
          <div class="user-avatar" id="userAvatar">
            <img id="avatarImage"
              src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2338bdf8'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E"
              alt="Avatar">
          </div>
          <div class="user-dropdown" id="userDropdown">
            <button class="dropdown-item" id="btn-dropdown-profile">
              <span class="dropdown-icon">üë§</span>
              <span>Editar Perfil</span>
            </button>
            <div class="dropdown-divider"></div>
            <button class="dropdown-item" id="btn-dropdown-logout">
              <span class="dropdown-icon">üö™</span>
              <span>Sair</span>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Views -->
    <main>
      <!-- 1. Welcome / Login View -->
      <section id="view-welcome" class="view active">
        <div class="hero">
          <h1>Descubra Sua <span class="gradient-text">Verdadeira Pot√™ncia</span></h1>
          <p>Transforme seu celular em um medidor de pot√™ncia profissional.</p>
          <div class="controls-column"
            style="display: flex; flex-direction: column; gap: 1rem; max-width: 300px; margin: 0 auto;">
            <button id="btn-welcome-login" class="btn-primary">Entrar</button>
            <button id="btn-welcome-signup" class="btn-secondary">Criar Conta</button>
          </div>
        </div>
      </section>

      <!-- Auth View -->
      <section id="view-auth" class="view hidden">
        <div class="card">
          <h2 id="auth-title">Bem-vindo de Volta</h2>
          <p class="subtitle">Sincronize seus pedais entre dispositivos.</p>

          <div id="auth-message" class="auth-message hidden"
            style="margin-bottom: 1rem; padding: 0.5rem; border-radius: 8px; text-align: center; display: none;"></div>

          <form id="form-auth">
            <div class="input-group">
              <label for="email">E-mail</label>
              <input type="email" id="email" required placeholder="voce@exemplo.com">
            </div>
            <div class="input-group">
              <label for="password">Senha</label>
              <input type="password" id="password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
            </div>
            <button type="submit" class="btn-primary" id="btn-submit-login">Entrar</button>
            <button type="button" class="btn-text" id="btn-switch-auth-mode">Precisa de uma conta? Cadastre-se</button>
          </form>
          <button id="btn-back-auth" class="btn-text">Voltar</button>
        </div>
      </section>

      <!-- 2. Profile Setup View -->
      <section id="view-setup-profile" class="view hidden">
        <div class="card">
          <h2>Perfil do Ciclista</h2>
          <p class="subtitle">Vamos calibrar para sua f√≠sica.</p>
          <form id="form-profile">
            <div class="input-group">
              <label for="rider-name">Nome</label>
              <input type="text" id="rider-name" placeholder="ex: Jo√£o Silva" required>
            </div>
            <div class="input-group">
              <label for="rider-weight">Peso (kg)</label>
              <input type="number" id="rider-weight" placeholder="ex: 75" required>
            </div>
            <div class="input-group">
              <label for="rider-height">Altura (cm)</label>
              <input type="number" id="rider-height" placeholder="ex: 180" required>
            </div>
            <button type="submit" class="btn-primary">Pr√≥ximo</button>
          </form>
        </div>
      </section>

      <!-- 3. Bike Setup View -->
      <section id="view-setup-bike" class="view hidden">
        <div class="card">
          <h2>Configura√ß√£o da Bike</h2>
          <p class="subtitle">Conte-nos sobre sua m√°quina.</p>
          <form id="form-bike">
            <div class="input-group">
              <label for="bike-type">Tipo de Bike</label>
              <select id="bike-type" required>
                <option value="road">Speed / Estrada</option>
                <option value="mtb">Mountain Bike</option>
                <option value="gravel">Gravel</option>
                <option value="tt">Contra-Rel√≥gio (TT)</option>
              </select>
            </div>
            <div class="input-group">
              <label for="crank-length">Tamanho do Pedivela (mm)</label>
              <input type="number" id="crank-length" placeholder="ex: 172.5" step="0.5" required>
            </div>
            <button type="submit" class="btn-primary">Finalizar Configura√ß√£o</button>
          </form>
        </div>
      </section>

      <!-- 4. Dashboard View -->
      <section id="view-dashboard" class="view hidden">
        <!-- Workout Overlay -->
        <div id="workout-overlay" class="workout-overlay hidden">
          <div class="interval-info">
            <span id="interval-name">Aquecimento</span>
            <span id="interval-timer">05:00</span>
          </div>
          <div class="target-display">
            <div class="value"><span id="target-power">150</span> <span class="unit">W</span></div>
            <div class="unit">Alvo</div>
          </div>
          <div class="power-bar-container">
            <div class="target-marker"></div>
            <div id="power-bar-fill" class="power-bar-fill"></div>
          </div>
        </div>

        <!-- Mode Toggle -->
        <div class="mode-control-container">
          <label class="switch">
            <input type="checkbox" id="toggle-outdoor-mode">
            <span class="slider round"></span>
          </label>
          <span id="mode-status-text">Modo Indoor üè†</span>
        </div>

        <div class="dashboard-grid">
          <!-- Slope Control -->
          <div class="metric-card large">
            <h3>Inclina√ß√£o Simulada</h3>
            <div class="value"><span id="val-slope">0</span>%</div>
            <div class="slope-control">
              <span>-5%</span>
              <input type="range" id="slope-slider" min="-5" max="15" step="1" value="0">
              <span>15%</span>
            </div>
          </div>

          <div class="metric-card large">
            <h3>Pot√™ncia</h3>
            <div class="value"><span id="val-power">0</span> <span class="unit">W</span></div>
          </div>
          <div class="metric-card">
            <h3>Cad√™ncia</h3>
            <div class="value"><span id="val-cadence">0</span> <span class="unit">rpm</span></div>
          </div>
          <div class="metric-card">
            <h3>Velocidade</h3>
            <div class="value"><span id="val-speed">0</span> <span class="unit">km/h</span></div>
          </div>
          <div class="metric-card">
            <h3>Calorias</h3>
            <div class="value"><span id="val-calories">0</span> <span class="unit">kcal</span></div>
          </div>
        </div>

        <div class="controls">
          <button id="btn-start-ride" class="btn-primary">Iniciar Pedal</button>
          <button id="btn-stop-ride" class="btn-danger hidden">Parar Pedal</button>
          <button id="btn-connect-bluetooth" class="btn-icon" title="Conectar Sensores">üì°</button>
        </div>

        <div class="controls" style="margin-top: 1rem; justify-content: space-around;">
          <button id="btn-select-workout" class="btn-text">üèãÔ∏è Treinos</button>
          <button id="btn-view-history" class="btn-text">üìú Hist√≥rico</button>
          <button id="btn-view-achievements" class="btn-text">üèÜ Conquistas</button>
        </div>
      </section>

      <!-- 5. Ride History View -->
      <section id="view-ride-history" class="view hidden">
        <div class="card">
          <div class="header-row">
            <h2>Hist√≥rico de Pedais</h2>
            <button id="btn-back-history" class="btn-text">Voltar</button>
          </div>
          <div id="history-list" class="history-list">
            <!-- History Items -->
          </div>
        </div>
      </section>

      <!-- 6. Session Details View -->
      <section id="view-session-details" class="view hidden">
        <div class="card">
          <div class="header-row">
            <h2>Detalhes da Sess√£o</h2>
            <button id="btn-close-details" class="btn-text">Fechar</button>
          </div>

          <div class="chart-container">
            <canvas id="session-chart"></canvas>
          </div>

          <div class="stats-grid">
            <div class="stat-item">
              <span class="label">Pot√™ncia M√©dia</span>
              <span class="value" id="detail-avg-power">0 W</span>
            </div>
            <div class="stat-item">
              <span class="label">Velocidade M√©dia</span>
              <span class="value" id="detail-avg-speed">0 km/h</span>
            </div>
            <div class="stat-item">
              <span class="label">Dura√ß√£o</span>
              <span class="value" id="detail-duration">00:00</span>
            </div>
          </div>

          <div class="actions-row">
            <button id="btn-export-csv" class="btn-secondary">Exportar CSV</button>
            <button id="btn-export-gpx" class="btn-primary">Exportar GPX (Strava)</button>
          </div>
        </div>
      </section>

      <!-- 7. Workouts View -->
      <section id="view-workouts" class="view hidden">
        <div class="card">
          <div class="header-row">
            <h2>Selecionar Treino</h2>
            <button id="btn-back-workouts" class="btn-text">Voltar</button>
          </div>
          <div id="workout-list" class="workout-list">
            <!-- Workout Items -->
          </div>
          <button id="btn-create-workout" class="btn-secondary" style="margin-top: 1rem;">+ Criar Personalizado</button>
        </div>
      </section>

      <!-- 8. Create Workout View -->
      <section id="view-create-workout" class="view hidden">
        <div class="card">
          <h2>Criar Treino</h2>
          <form id="form-create-workout">
            <div class="input-group">
              <label>T√≠tulo</label>
              <input type="text" id="workout-title" required>
            </div>
            <div class="input-group">
              <label>Descri√ß√£o</label>
              <input type="text" id="workout-desc">
            </div>
            <div class="input-group">
              <label>Intervalos (JSON)</label>
              <textarea id="workout-json" rows="10"
                placeholder='[{"name":"Aquecimento","duration":300,"target":100}]'></textarea>
            </div>
            <div class="controls-row">
              <button type="button" id="btn-cancel-create" class="btn-secondary">Cancelar</button>
              <button type="submit" class="btn-primary">Salvar Treino</button>
            </div>
          </form>
        </div>
      </section>

      <!-- 9. Profile Edit View -->
      <section id="view-profile" class="view hidden">
        <div class="card">
          <div class="header-row">
            <h2>Meu Perfil</h2>
            <button id="btn-back-profile" class="btn-text">Voltar</button>
          </div>
          <form id="form-edit-profile">
            <div class="input-group" style="text-align: center; margin-bottom: 2rem;">
              <div class="avatar-upload-container">
                <div class="avatar-preview" id="avatarPreview">
                  <img id="avatarPreviewImage"
                    src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2338bdf8'%3E%3Cpath d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/%3E%3C/svg%3E"
                    alt="Avatar Preview">
                </div>
                <label for="avatar-upload" class="avatar-upload-btn">
                  üì∑ Alterar Foto
                </label>
                <input type="file" id="avatar-upload" accept="image/*" style="display: none;">
              </div>
            </div>
            <div class="input-group">
              <label for="edit-name">Nome</label>
              <input type="text" id="edit-name" placeholder="ex: Jo√£o Silva" required>
            </div>
            <div class="input-group">
              <label for="edit-weight">Peso (kg)</label>
              <input type="number" id="edit-weight" placeholder="ex: 75" required>
            </div>
            <div class="input-group">
              <label for="edit-height">Altura (cm)</label>
              <input type="number" id="edit-height" placeholder="ex: 180" required>
            </div>
            <div class="input-group">
              <label for="edit-bike-type">Tipo de Bike</label>
              <select id="edit-bike-type" required>
                <option value="road">Speed / Estrada</option>
                <option value="mtb">Mountain Bike</option>
                <option value="gravel">Gravel</option>
                <option value="tt">Contra-Rel√≥gio (TT)</option>
              </select>
            </div>
            <div class="input-group">
              <label for="edit-crank-length">Tamanho do Pedivela (mm)</label>
              <input type="number" id="edit-crank-length" placeholder="ex: 172.5" step="0.5" required>
            </div>
            <button type="submit" class="btn-primary">Salvar Altera√ß√µes</button>
          </form>
        </div>
      </section>

      <!-- 10. Achievements View -->
      <section id="view-achievements" class="view hidden">
        <div class="card">
          <div class="header-row">
            <h2>Conquistas</h2>
            <button id="btn-back-achievements" class="btn-text">Voltar</button>
          </div>
          <div id="achievements-grid" class="achievements-grid">
            <!-- Cards -->
          </div>
        </div>
      </section>

      <!-- 11. Plans & Subscription View -->
      <section id="view-plans" class="view hidden">
        <div class="card">
          <div class="header-row">
            <h2>Planos & Cr√©ditos</h2>
            <button id="btn-back-plans" class="btn-text">Voltar</button>
          </div>

          <div class="credits-banner">
            <span class="credits-count" id="user-credits">0</span>
            <span class="credits-label">Cr√©ditos Dispon√≠veis</span>
          </div>

          <div class="plans-grid">
            <!-- Plano Amador -->
            <div class="plan-card">
              <div class="plan-header">
                <h3>Amador</h3>
                <div class="price">R$ 19,90<span class="period">/m√™s</span></div>
              </div>
              <ul class="plan-features">
                <li>‚úÖ <strong>30 Cr√©ditos</strong> de Treino</li>
                <li>‚ùå Conquistas Bloqueadas</li>
                <li>‚ùå Criador de Treinos Bloqueado</li>
              </ul>
              <button class="btn-primary btn-subscribe" data-plan="amateur">Assinar Amador</button>
            </div>

            <!-- Plano PRO -->
            <div class="plan-card featured">
              <div class="badge">RECOMENDADO</div>
              <div class="plan-header">
                <h3>PRO</h3>
                <div class="price">R$ 39,90<span class="period">/m√™s</span></div>
              </div>
              <ul class="plan-features">
                <li>‚úÖ <strong>60 Cr√©ditos</strong> de Treino</li>
                <li>‚úÖ <strong>Conquistas Liberadas</strong></li>
                <li>‚úÖ <strong>Criador de Treinos Liberado</strong></li>
              </ul>
              <button class="btn-primary btn-subscribe" data-plan="pro">Assinar PRO</button>
            </div>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script src="/translations.js"></script>


  <script src="/apply-i18n.js"></script>


  <script type="module" src="/main.js"></script>
</body>

</html>